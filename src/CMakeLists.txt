add_subdirectory(include)

# make the inclusion of ensure.h an error. add_compile_options(-DENSURE_DISABLE)

gen_pubsub_headers("${CMAKE_SOURCE_DIR}" "${CMAKE_BINARY_DIR}")
include_directories(${CMAKE_BINARY_DIR}/generated)

include_directories(include)

# ##############################################################################
# sys and base
# ##############################################################################
add_subdirectory(sys)
add_subdirectory(base)

# ##############################################################################
# brokers and states
# ##############################################################################
add_subdirectory(brokers)
add_subdirectory(states)

# ##############################################################################
# engine
# ##############################################################################
add_subdirectory(engine)

# ##############################################################################
# perf
# ##############################################################################
add_subdirectory(perf)

# ##############################################################################
# shared lotto runtime
# ##############################################################################
add_subdirectory(runtime)

# ##############################################################################
# Frontends
# ##############################################################################
add_subdirectory(plotto)

if("${LOTTO_FRONTEND}" STREQUAL "QEMU")
    add_subdirectory(qlotto)
endif()

# ##############################################################################
# Lotto fuzzer
# ##############################################################################
add_subdirectory(flotto)

# ##############################################################################
# driver and cli
# ##############################################################################
add_subdirectory(cli)
