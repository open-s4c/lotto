check       = @TIKL_CHECK_PROGRAM@ -x
builddir    = @PROJECT_BINARY_DIR@
emulator    =
lotto       = timeout -s 9 110s stdbuf -i0 -o0 -e0 %emulator %builddir/lotto
tmpdir      = --temporary-directory %T
output      = -o %t.trace
input       = -i %t.trace
filter      = src/runtime|src/plotto|libvsync

# lotto subcommands
debug          = debug %tmpdir %input --file-filter="%filter"
explore        = explore %tmpdir %input %output
inflex         = inflex %tmpdir %input %output
record         = record %tmpdir %output
replay         = replay %tmpdir %input
rinflex        = rinflex %tmpdir %input
run            = run %tmpdir
sc             = sc %tmpdir %output
show           = show %tmpdir %input
stress         = stress %tmpdir %output
stress4rinflex = stress %tmpdir %output -s random --stable-address-method MAP --handler-address enable --handler-cas enable --handler-stacktrace enable --handler-event enable
trace          = trace %tmpdir %output

# tikl flags
-q
# -vv
-j 1
# -j @TIKL_WORKERS@
-t @TIKL_TIMEOUT@
-s @CMAKE_CURRENT_SOURCE_DIR@
-b @CMAKE_CURRENT_BINARY_DIR@
-T @CMAKE_CURRENT_BINARY_DIR@/tmp

# features
-D @CMAKE_SYSTEM_PROCESSOR@
-D @LOTTO_ENGINE_NAME@
-D @LOTTO_RUST_LIT_FEATURE@
-D @LOTTO_STABLE_ADDRESS_MAP_LIT_FEATURE@
