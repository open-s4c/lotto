file(GLOB SRCS *_test.c)
foreach(SRC ${SRCS})
    get_filename_component(TARGET ${SRC} NAME_WLE)
    string(REGEX REPLACE "_test" "_testing" SRC_LIB ${TARGET})
    add_executable(${TARGET} ${SRC})
    target_link_libraries(${TARGET} ${SRC_LIB})
    add_test(NAME ${TARGET} COMMAND ${TARGET})
endforeach()
